IMPORT ML_Core;
IMPORT ML_Core.Types as Types;

EXPORT Files := MODULE
EXPORT Layout := RECORD
    REAL x;
    REAL y;
    INTEGER label;
END;

EXPORT trainRecs := DATASET([
    {0.723584440399443,1.422857269221524,0},
    {0.40361756851972413,0.6364832233214601,2},
    {0.6881525016373257,1.3923946784387313,0},
    {0.21899970713970202,-0.7206537304671464,2},
    {0.47897924153229926,-0.7346134915058695,2},
    {1.2756497951193086,1.8620221752383002,0},
    {0.7325911426193507,1.108959751359074,0},
    {0.40673175930267075,-0.4694095640801235,2},
    {-0.8695741259109044,-0.8140610764993315,1},
    {-0.02216244395991702,2.0557740204823287,0},
    {1.1375166692069052,-0.6140908640570786,2},
    {0.7054173434472875,-0.7207421446897591,1},
    {0.0725108855962286,-0.5776603258943038,1},
    {0.6220529366981195,0.0086729124607874,2},
    {1.5282592383507483,-0.20374662139494396,2},
    {0.7192155178852517,1.8559509317948846,0},
    {0.634157753778874,-0.05209303572743978,2},
    {0.095836445620748,-0.3704951462425692,1},
    {0.8925272025624275,-0.8254804978947059,2},
    {0.6201811466366016,-0.8018703869087874,1},
    {0.6503714349039194,-0.5246209378106006,1},
    {0.45683277447074216,0.795501805551598,0},
    {0.2584328870794075,-0.3485881937428733,1},
    {0.1806748602392385,0.0172581508633172,1},
    {0.199096077979893,-0.4572794137083835,1},
    {1.0078601948485826,0.9719681292694076,0},
    {0.5034275422142045,-0.2496606325951934,1},
    {1.4097879135245754,0.8773441633198765,0},
    {0.808732470849126,-0.3790998557651086,1},
    {-0.5873488944475729,0.284069846846692,1},
    {1.1544496304898033,1.7545733338696816,0},
    {1.5709388095584131,0.6853345074273152,0},
    {0.8119272937998598,0.04058527028083927,1},
    {0.9120163806403129,0.3864153399764594,2},
    {0.9707392249655056,-0.41021914809357307,2},
    {0.2607374141287881,0.3633596831985435,2},
    {0.1434827033251044,-0.6341703891042642,2},
    {0.33569166526940475,0.5758983065793278,0},
    {0.2471033835323557,-0.4673323683783572,2},
    {1.616371622460845,-0.36153118683591967,2},
    {-0.361423429289194,1.533717842307418,0},
    {1.1129175642698683,0.176279463574417,2},
    {0.13424690037821518,-0.9274183996653838,2},
    {1.0304674366742845,-0.6133724530739332,2},
    {0.2223867135250552,-0.20782841112000378,1},
    {1.0536582785742998,2.1725353803929086,0},
    {-0.7455755982259181,0.021374955442911993,1},
    {1.0421790593642357,1.2097457583694247,0},
    {0.3376767417255055,-0.022903371377038677,1},
    {0.820171325577915,0.1815637883470091,2},
    {0.5221002302484565,1.333585768305741,0},
    {-0.8853523356947324,0.2386185212362615,1},
    {0.5063076836583666,1.148995930032038,0},
    {1.368315594014136,1.4317092932472044,0},
    {0.7869395806649598,0.9269202805157047,0},
    {0.6457608705037157,0.2117613045070308,2},
    {0.1553036796626774,0.3599277254458055,1},
    {0.33959290302770423,0.0191656941781375,2},
    {0.17049689648388108,-0.4018242669775307,2},
    {1.0048128119273008,0.0036611780667977,2},
    {0.5162398287273087,0.002609989666831914,1},
    {-0.5935961429752957,-0.3769997406691967,1},
    {0.5076114238271976,0.0424702635181295,1},
    {0.8509378341452696,-0.3515029548938858,1},
    {0.008317785701919184,1.4569134881316421,0},
    {0.40734238475039747,1.1246717710946554,0},
    {0.6502086203270346,1.4430485210511612,0},
    {0.36309454269843155,0.0742582037087087,2},
    {0.4492666142915591,-0.41869006864053865,1},
    {0.24136964785350082,0.699158162770458,0},
    {0.3027078319138825,1.426374777395525,0},
    {-0.5714054283626111,-0.14579740472888328,1},
    {0.3920612276779987,1.1259548213917845,0},
    {0.8711654523605058,-0.8106890477007829,2},
    {0.6201431794760485,1.4359115159991744,0},
    {0.014849019094771649,1.1850414111891943,0},
    {0.15953444041895185,1.5835715051986032,0},
    {0.6869570856235707,0.027080165483983964,1},
    {0.3057853563979306,0.47346617490365517,0},
    {0.1910588465791883,0.1841151077075078,1},
    {0.6120733700222583,-0.7288376002298468,1},
    {0.7282828055178916,-0.4860722341510756,2},
    {1.0419115632259972,-0.7064121487541134,2},
    {0.9664308160685777,1.3196308237799086,0},
    {0.5196634087994497,0.295013684060599,2},
    {0.20173641796991865,-0.9178540698879116,2},
    {0.4572947372208017,1.0943530548992453,0},
    {0.4619504949132993,0.03491493164532558,2},
    {0.8393463271660083,1.4049524672637759,0},
    {0.36517478725123703,-0.1206436154539765,2},
    {1.260143542937022,1.188092883864222,0},
    {0.4667157567124434,-0.7190437770694487,1},
    {0.6907921500937355,-0.9746131174054743,1},
    {0.06398813488173265,-0.5648097720472661,2},
    {0.6798349682644033,1.1953269004021847,0},
    {0.7709096866955978,-0.3172715512251599,1},
    {0.29575381835454273,-0.2920916996481616,2},
    {0.2910331148751704,-0.5798627876427359,1},
    {-0.9623418857655706,-0.8040338420373934,1},
    {0.0497541190713897,-0.6897374807638246,1}
], Layout);

EXPORT testset0 := DATASET([
                            {3,4,1},
                            {2,3,1},
                            {3,3,1},
                            {4,3,1},
                            {3,2,1},
                            {8,4,2},
                            {7,3,2},
                            {8,3,2},
                            {9,3,2},
                            {8,2,2}], Layout);

// l_stage2:the dataframe of the result of stage 1
// which will feed to stage 2 for local clustering.

EXPORT l_stage1 := RECORD
    Types.NumericField;
    UNSIGNED nodeId;
    SET OF REAL4 fields;
END;

EXPORT l_stage3 := RECORD
UNSIGNED4 wi;
UNSIGNED4 nodeid;
UNSIGNED4 id;
UNSIGNED4 parentID;
BOOLEAN   if_local := FALSE;
BOOLEAN   if_core := FALSE;
END;

EXPORT l_stage2 := RECORD
    Types.NumericField.wi;
    Types.NumericField.id;
    Types.t_RecordID parentID;
    UNSIGNED nodeId;
    SET OF REAL4 fields;
    BOOLEAN if_local := FALSE;
    BOOLEAN if_core := FALSE;
END;

EXPORT l_result := RECORD
    UNSIGNED4 wi;
    UNSIGNED4 id;
    UNSIGNED4 clusterID;
END;

END;